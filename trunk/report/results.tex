\chapter{Results}
\label{cha:results}

	\section{Final state}
	\label{sec:end-state}
	
		% Describes the fulfillment of this project.

		\todo{Describe battery usage, size requirements actual data}
		% The production of a fully functional, low cost and low sized ECG monitoring system which employs an Android device as the user interface, and it's USB 802.15.4 receiver is completed.\\

		The production of the fully functional, low energy requiring, low sized ECG monitoring system employing an Android device as the user interface and 802.15.4 as the wireless data transferring protocol has been achieved. The system provides all the required functionality: real-time ECG wave data visualization both from 802.15.4 and Bluetooth nodes and storing of the received data in log files for afterwards visualization of these, as well as visualization parameters configuration. The system is, then, a more energy efficient and accessible version of the one produced by the Complutense University of Madrid and the École Polytechnique Fédérale de Lausanne, which is the primary objective of the project.\\

		This achievement is made thanks to the successful outcome of both the hardware research and the software development processes in which the project has been divided. Each of them requiring the employment of specific methodologies and techniques, but being, as they were, highly dependent one on the other only complicated the prediction of the outcome of them both. Thanks to the flexible scheduling conducted for each one, which considered the potential eventualities to arise in the other and focused in allowing rescheduling when necessary, this uncertainty has been correctly managed, leading to the current, successfully finalized state of the project.\\
		
		% HW: The goal of an external 802.15.4 receiver device is fulfilled. Employing it the system is able to render ECG data emitted by a delineator node. Bluetooth is also available, as well as log saving and further reading.\\
		% No olvidar hablar de modificaciones al shimmer!
		Regarding the hardware research part, the main goal pursued was the production of the 802.15.4 USB receiver device for Android systems. This device has successfully evolved from the early stages of development where a prototyping board was employed to a custom developed printed circuit board, which, if has not been produced, is completely designed and validated\todo{Not yet, but soon}.\\

		% Concrete results: X x Y x Z sized device consuming W1 watts of power (actual data, please) which compared to Bluetooth consumption (W2 watts, ...) is pretty low cost, all of this powered by the Android device, and the receiver being plug and play no installation procedure is required.\\
		The prototype board's \todo{Substitute these for the PCB ones if available}dimensions are 7.25 x 6.35 x 3.5 cm, and it requires 3.3V for correct operation, being usable with at least 3.0V. Its USB capability allows for it to be connected to any HID compliant system, and has been successfully employed as an 802.15.4 receiver both in Android devices and Windows based personal computers.\\

		In respect of the Android application, the software development project has produced an Android application providing all required functionality, namely visualization of ECG data from Bluetooth and USB nodes, log saving and reading, and view controlling capabilities, designed and implemented in a robust, expandable manner. Moreover, the application provides a domain-specific framework for the inclusion of new data sources (like Wi-Fi or Near Field Connection) or different source data specifications.\\

		The application presents simple, easy to use user interfaces and very specific functionality, which added to the following of Android proposed application design best-practices smooth the learning curve and allow out of the box usage of the software part of the system. Due to the expansion capabilities of the system, new user interfaces or dialogs can also be added with ease.\\
	
	\section{Potential additions and expansions}
	\label{sec:end-further}
		\begin{comment}
		Potential additions are to target the software frontend application. The developed Android application is a (domain specific) general purpose monitoring frontend that should provide a solid framework for further developments.\\

		Professional multipatient monitoring could come in two flavours:\\

		Visual-less multipatient monitoring in which a computer receives data from a variable number of wireless delineation nodes, e.g. employing the 802.15.4 receiver, storing it and acting as a server, or directly sending the log files to the actual server. The Android device would then download the log from the server and the own frontend application developed in the scope of this project could be used as the visualization device.\\

		The other option is simultaneous multipatient monitorization in an Android device. The monitorization application on the device would allow switching between patient ECG wave visualization while logging all received data, which could then be uploaded to a server.\\

		(Both of these expansions could find an employment in acutal medical environment.)


		More improvements can include the implementation of more detailed log navigation functionality, including information about the actual recording time and searching of specific time moments.
		Inclusion of event data into the log (like body weakness sensation or feeling of dizziness) could also be useful.
		(This two are for personal monitorization and inhome healthcare)\\

		Message sending when certain events occur (low or high hbr or arrythmia detection), text message, email, even a phone call could help constant monitorization requiring people. GPS information could be included in the message for quick localization of the affected person by the healthcare personal.

		% Comentar también como trabajo futuro los requisitos que plantea Marian
		\end{comment}

		Although every initially planned objective has been fulfilled, in addition to several of them which
		were added during the development, there is still room for improvements and features which were
		not considered or left out of scope, since the developed application is not considered as a specific
		product itself, but a framework for further developments. These improvements can be classified according 
		to the period planned for their implementation:

		\begin{itemize}
			\item \textbf{Short-term:} the following features specifically target personal use. Considering
				the user is to monitor his/her own vital signs, the next additions are thought to be useful:

				\begin{itemize}
					\item \emph{Event Tagging}\\
						Assuming the user is feeling funny or pain, it may be quite interesting for him/her
						to be able to annotate such an event with later revision purposes, either by
						him/herself or medical staff. Furthermore, the capability of marking down one peculiar
						result about the ECG delineation can also be useful.\\

						In this way, making use of the tactile interface the Android tablet features, this
						activity can be done by simply touching the relevant event or result. Next, the moment
						which that points refers is logged and a comment may be added to the annotation.\\

					\item \emph{Temporal Meta-Data}\\
						In the same conditions described in the previous item, it is possible that the user
						had felt a particular sensation in a certain moment, yet he/she was unable to mark it.
						Moreover, maybe the annotation was done and it is required to directly jump to that
						certain time.\\

						In order to ease these tasks, time-related data is to be added so that a precise
						moment of the monitoring can be directly found. In this way, the user can input
						the desired date so that the application shows what was happening at that moment.
						In addition, markers from previous annotations would also appear for quickly accessing
						to relevant events.\\

					\item \emph{Voice Commands}\\
						Due to the particular health condition of the user, or just because he/she is busy,
						direct interaction with the monitoring Android device is likely to be impossible. If
						situations like these are to happen, letting users interact with the system through
						their own voice may ease the aforementioned tasks.\\

						Fortunately, Android provides speech recognition support throughout its specific API,
						so this feature could be added without developing the whole voice recognition framework.\\

					\item \emph{Automatic Warnings}\\
						Regarding the user's health condition or unavailability again, automatic message sending
						with ECG data in case of relevant happenings were detected would mean a seamless way to
						warn the user, relatives or qualified staff if needed. In the same direction, multiple
						alternatives would be presented such as emails with GPS location attachments or direct
						automatic voice calls to complement this feature.

				\end{itemize}

				All these features come from a potential project proposed by an specific individual, which, 
				being affected of a certain cardiovascular disease and considering the goals and results of 
				this specific project, has shown interest in further specialization of the developed system for
				particular needs. This private enterprise is yet to be started, but the inception phase has already
				begun, and is seeking funding. The team of the current project is offering consulting on the
				viability of the requirements of the project, and testing has been conducted of the already
				available system with the interested individual.\\

			\item \textbf{Long-term:} this features are mainly ideas which would grant the system with much 
				richer capabilities and new potential, though it would require of a greater amount of time
				along with specific planning and dedication.\\

				On the one hand, the application can be focused towards professional multipatient monitoring,
				which could be developed in at least two alternative ways:

				\begin{itemize}
					\item Since the developed 802.15.4 USB receiver is also compatible with HID-compliant
						devices, particularly computers, multipatient monitoring could be uploaded to a
						devoted server from a variable number of wireless delineaton nodes, omitting the 
						displaying service the Android application provides. Once the data is uploaded,
						the Android device could connect with the mentioned server and download the information
						right from the developed application. Then, the Android tablet would act as usual
						as frontend of the monitoring process, displaying the downloaded data.

					\item Taking into account the relatively big display a tablet device provides, this
						multipatient monitoring paradigm could be directly implemented into the Android 
						device by extending the application's functionality. Among this new functionalities
						there would be switching between ECG wave visualizations of different patients,
						simultaneous logging and server uploading as well.
				\end{itemize}

				On the other hand, regarding self-monitoring, the system can be adapted to be applied to 
				specific domains which impose additional time or resource restrictions.
				Specifically the director of the Embedded Systems Laboratory at the EPFL, where the delineator 
				node employed in this project was produced in the aforementioned collaboration with the UCM, 
				has shown interest in the application of the low power requirements of system in a specific project
				the EPFL is collaborating with: Solar Impulse \cite{solarflight}.\\

				This particular project tries to achieve a flight around the world employing no fuel, just the
				energy collected from the sun. The airplane used in the project allows only for the pilot to be
				in the cockpit throughout the flight, and, thus, he/she is required to be constantly monitorized.
				Among others, ECG monitorization is required, at is, at the time, being provided by the EPFL and
				UCM monitoring project with the already exposed battery implications of the employment of 
				Bluetooth as the wireless technology.\\

				Considering that the space in the cockpit is very reduced, and the amount of wires, sensors and
				other instruments that are present, any operation is to be done with special care and only when
				absolutely needed. Concretely, the swapping of a battery-exhausted delineator node for another,
				fully-charged one, to allow the recharging of the first, is a complex procedure as the body
				sensor network wires have to be unplugged from one node and plugged into the other. Moreover,
				while this procedure is being performed ECG monitorization is interrupted.\\

				Reducing the battery consumption of the delineator node is then, a must, and can be achieved by
				the employment of 802.15.4 as the wireless communication protocol. Because of that, the results
				obtained in this project can of great use to the Solar Impulse project.\\
	
		\end{itemize}
	
	\section{Findings}
	\label{sec:end-findings}

		Development:
		
		Employment of Android for this real-time thingamagigs is not the best thing ever as, even if the devices have high computational power, the restrictions imposed by the operating system hardens the task quite a lot. In that scenario a custom display device would allow finer, prettier visualization of the data, BUT of course the benefits of employing Android like 1. it's already developed duh 2. simplicity of development of visually rich apps and, specially, 3. high availability of the devices which reduces the amount of devices carried, compensate for every drawback it may have. So, asuming some limitations in the display applications (which already can eventually or will be able to be overcome) the selection of Android as a platform has been awesomely great.

		Regarding the process of a project such as this that spawn various subprojects with different characteristics and highly related one on the other, the employment of a flexible schedule, a detailed risk management procedure and focusing a lot on the current objective and it's deadline is critical for a successful outcome.

		Results:

		Ideas: importance of monitorization systems for cardiovascular diseases affected people. Great potential of development in this area. Low cost, low sized, user focused designed, an thus, comfortable application system development is a ineherntly good goal, as are of great help for CVD affected people.

		In this line, 802.15.4 as a low energy requiring wireless protocol significantly reduce the need of monitorization interruption due to battery recharging procedures, which seems like a small thing but is extra nice for minimizing the impact in the life style of the affected people. Also, employment of Android instead of iOS allows things like letting the application work in background while doing other things, shall not be interrupted by an incoming call and such. Also seem like small things but hell if you have to cope with them in day after day.

		Interesting: Marian is interested in the project for personal monitorization, David Atienza (EPFL's ESL \& UCM) is highly interested in the lower energy costs this project has achieved. Also, Solar Flight.
